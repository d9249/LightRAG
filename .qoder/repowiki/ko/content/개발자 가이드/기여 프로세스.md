# 기여 프로세스

<cite>
**이 문서에서 참조된 파일**  
- [pyproject.toml](file://pyproject.toml)
- [lightrag/\_\_init\_\_.py](file://lightrag/__init__.py)
- [lightrag/api/lightrag_server.py](file://lightrag/api/lightrag_server.py)
- [lightrag/api/config.py](file://lightrag/api/config.py)
- [k8s-deploy/install_lightrag_dev.sh](file://k8s-deploy/install_lightrag_dev.sh)
</cite>

## 목차
1. [소개](#소개)
2. [패키지 메타데이터](#패키지-메타데이터)
3. [개발 종속성](#개발-종속성)
4. [스크립트 명령어](#스크립트-명령어)
5. [기여 워크플로우](#기여-워크플로우)
6. [브랜치 전략](#브랜치-전략)
7. [커밋 컨벤션](#커밋-컨벤션)
8. [PR 제출 절차](#pr-제출-절차)
9. [Python 패키징 및 배포 프로세스](#python-패키징-및-배포-프로세스)
10. [개발 환경 설정](#개발-환경-설정)

## 소개
이 문서는 LightRAG 리포지토리에 기여하기 위한 포괄적인 가이드를 제공합니다. CONTRIBUTING.md 파일이 존재하지 않으므로, pyproject.toml 파일과 관련 소스 코드를 기반으로 기여 프로세스를 문서화합니다. 이 문서는 패키지 메타데이터, 개발 종속성, 스크립트 명령어를 분석하여 기여를 위한 표준 워크플로우를 안내합니다. 또한 브랜치 전략, 커밋 컨벤션, PR 제출 절차를 추론하여 설명하고, Python 패키징 및 배포 프로세스에 대한 가이드를 포함합니다.

## 패키지 메타데이터
LightRAG 패키지의 메타데이터는 pyproject.toml 파일에 정의되어 있습니다. 이 메타데이터는 패키지의 기본 정보, 종속성, 라이선스 등을 포함합니다.

```toml
[project]
name = "lightrag-hku"
dynamic = ["version"]
authors = [
    {name = "Zirui Guo"}
]
description = "LightRAG: Simple and Fast Retrieval-Augmented Generation"
readme = "README.md"
license = {text = "MIT"}
requires-python = ">=3.10"
classifiers = [
    "Development Status :: 4 - Beta",
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Intended Audience :: Developers",
    "Topic :: Software Development :: Libraries :: Python Modules",
]
```

**Diagram sources**
- [pyproject.toml](file://pyproject.toml#L10-L25)

**Section sources**
- [pyproject.toml](file://pyproject.toml#L10-L25)

## 개발 종속성
LightRAG 프로젝트는 다양한 종속성을 요구하며, 이들은 pyproject.toml 파일에 명시되어 있습니다. 주요 종속성은 다음과 같습니다:

```toml
dependencies = [
    "aiohttp",
    "configparser",
    "dotenv",
    "future",
    "json_repair",
    "nano-vectordb",
    "networkx",
    "numpy",
    "pandas>=2.0.0",
    "pipmaster",
    "pydantic",
    "pypinyin",
    "python-dotenv",
    "setuptools",
    "tenacity",
    "tiktoken",
    "xlsxwriter>=3.1.0",
]
```

API 관련 종속성은 선택적 종속성으로 정의되어 있습니다:

```toml
[project.optional-dependencies]
api = [
    # Core dependencies
    "aiohttp",
    "configparser",
    "dotenv",
    "future",
    "json_repair",
    "nano-vectordb",
    "networkx",
    "numpy",
    "openai",
    "pandas>=2.0.0",
    "pipmaster",
    "pydantic",
    "pypinyin",
    "python-dotenv",
    "setuptools",
    "tenacity",
    "tiktoken",
    "xlsxwriter>=3.1.0",
    # API-specific dependencies
    "aiofiles",
    "ascii_colors",
    "asyncpg",
    "distro",
    "fastapi",
    "httpcore",
    "httpx",
    "jiter",
    "passlib[bcrypt]",
    "psutil",
    "PyJWT",
    "python-jose[cryptography]",
    "python-multipart",
    "pytz",
    "uvicorn",
]
```

**Diagram sources**
- [pyproject.toml](file://pyproject.toml#L26-L50)
- [pyproject.toml](file://pyproject.toml#L52-L105)

**Section sources**
- [pyproject.toml](file://pyproject.toml#L26-L105)

## 스크립트 명령어
pyproject.toml 파일은 두 가지 스크립트 명령어를 정의합니다:

```toml
[project.scripts]
lightrag-server = "lightrag.api.lightrag_server:main"
lightrag-gunicorn = "lightrag.api.run_with_gunicorn:main"
```

이 명령어들은 LightRAG 서버를 실행하는 데 사용됩니다. `lightrag-server`는 FastAPI 기반의 서버를 시작하고, `lightrag-gunicorn`은 Gunicorn을 사용하여 서버를 시작합니다.

**Diagram sources**
- [pyproject.toml](file://pyproject.toml#L97-L99)

**Section sources**
- [pyproject.toml](file://pyproject.toml#L97-L99)

## 기여 워크플로우
기여 워크플로우는 다음과 같은 단계로 구성됩니다:

1. **리포지토리 포크**: GitHub에서 리포지토리를 포크합니다.
2. **로컬 클론**: 포크한 리포지토리를 로컬에 클론합니다.
3. **가상 환경 설정**: Python 가상 환경을 설정하고 종속성을 설치합니다.
4. **브랜치 생성**: 새로운 기능이나 버그 수정을 위한 브랜치를 생성합니다.
5. **코드 변경**: 필요한 코드 변경을 수행합니다.
6. **테스트 실행**: 변경 사항이 기존 기능을 손상시키지 않는지 테스트를 실행합니다.
7. **커밋**: 변경 사항을 커밋합니다.
8. **푸시**: 변경 사항을 원격 브랜치에 푸시합니다.
9. **PR 생성**: GitHub에서 풀 리퀘스트를 생성합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)
- [lightrag/api/lightrag_server.py](file://lightrag/api/lightrag_server.py)

## 브랜치 전략
LightRAG 프로젝트는 다음과 같은 브랜치 전략을 사용합니다:

- **main 브랜치**: 안정적인 상태를 유지하는 기본 브랜치입니다.
- **기능 브랜치**: 새로운 기능을 개발하기 위해 생성되는 브랜치입니다. 이름은 `feature/기능-이름` 형식을 따릅니다.
- **버그 수정 브랜치**: 버그를 수정하기 위해 생성되는 브랜치입니다. 이름은 `bugfix/버그-설명` 형식을 따릅니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)

## 커밋 컨벤션
LightRAG 프로젝트는 다음과 같은 커밋 컨벤션을 따릅니다:

- **형식**: `<type>: <subject>`
- **유형**: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`
- **주제**: 변경 사항의 간략한 설명

예: `feat: 사용자 인증 기능 추가`

**Section sources**
- [pyproject.toml](file://pyproject.toml)

## PR 제출 절차
풀 리퀘스트(PR)를 제출할 때는 다음 절차를 따릅니다:

1. **PR 템플릿 사용**: PR 템플릿을 사용하여 PR을 작성합니다.
2. **변경 사항 설명**: 변경 사항의 목적과 내용을 상세히 설명합니다.
3. **테스트 결과 포함**: 실행한 테스트의 결과를 포함합니다.
4. **코드 리뷰 요청**: 관련 팀원에게 코드 리뷰를 요청합니다.
5. **피드백 반영**: 리뷰어의 피드백을 반영하여 코드를 수정합니다.
6. **병합**: 모든 검토가 완료되면 PR을 병합합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)

## Python 패키징 및 배포 프로세스
LightRAG 패키지는 setuptools를 사용하여 패키징됩니다. 패키지 버전은 lightrag/\_\_init\_\_.py 파일에서 동적으로 가져옵니다:

```python
__version__ = "1.4.7"
```

패키지 빌드 시스템은 다음과 같습니다:

```toml
[build-system]
requires = ["setuptools>=64", "wheel"]
build-backend = "setuptools.build_meta"
```

패키지 배포는 PyPI를 통해 수행되며, setup.py 파일을 사용하여 패키지를 빌드하고 업로드합니다.

**Diagram sources**
- [lightrag/\_\_init\_\_.py](file://lightrag/__init__.py#L2)
- [pyproject.toml](file://pyproject.toml#L1-L3)

**Section sources**
- [lightrag/\_\_init\_\_.py](file://lightrag/__init__.py#L2)
- [pyproject.toml](file://pyproject.toml#L1-L3)

## 개발 환경 설정
개발 환경을 설정하기 위해 다음 단계를 따릅니다:

1. **가상 환경 생성**:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
```

2. **종속성 설치**:
```bash
pip install -e .
pip install -e ".[api]"
```

3. **서버 실행**:
```bash
lightrag-server
```

또는 Gunicorn을 사용하여 실행:
```bash
lightrag-gunicorn
```

**Section sources**
- [pyproject.toml](file://pyproject.toml)
- [lightrag/api/lightrag_server.py](file://lightrag/api/lightrag_server.py)
- [lightrag/api/config.py](file://lightrag/api/config.py)
- [k8s-deploy/install_lightrag_dev.sh](file://k8s-deploy/install_lightrag_dev.sh)