<docs>
# 개발자 가이드

<cite>
**이 문서에서 참조한 파일**  
- [pyproject.toml](file://pyproject.toml)
- [lightrag_server.py](file://lightrag/api/lightrag_server.py)
- [vite.config.ts](file://lightrag_webui/vite.config.ts)
- [tailwind.config.js](file://lightrag_webui/tailwind.config.js)
- [batch_eval.py](file://reproduce/batch_eval.py)
- [config.py](file://lightrag/api/config.py)
- [auth.py](file://lightrag/api/auth.py)
- [visual/vite.config.ts](file://visual/vite.config.ts) - *시각화 앱 구조 리팩터링*
- [visual/src/App.tsx](file://visual/src/App.tsx) - *React 기반 시각화 앱 이동*
- [visual/src/features/GraphViewer.tsx](file://visual/src/features/GraphViewer.tsx) - *그래프 뷰어 컴포넌트*
- [visual/src/hooks/useLightragGraph.tsx](file://visual/src/hooks/useLightragGraph.tsx) - *그래프 데이터 로딩 훅*
- [visual/scripts/generate_datasets.py](file://visual/scripts/generate_datasets.py) - *데이터셋 생성 스크립트*
</cite>

## 업데이트 요약
**변경 사항**   
- 시각화 애플리케이션의 디렉토리 구조가 `visual/src`로 정리됨
- Vite 구성이 수정되어 빌드 출력 및 데이터 복사 플러그인이 추가됨
- 데이터셋 자동 감지 및 로딩 메커니즘이 도입됨
- 그래프 시각화 앱에 레이아웃 모드 선택 기능이 추가됨
- 시각화 관련 소스 파일들의 경로와 참조를 업데이트함

## 목차
1. [기여 프로세스](#기여-프로세스)
2. [코드 스타일 및 테스트 전략](#코드-스타일-및-테스트-전략)
3. [로컬 개발 환경 설정](#로컬-개발-환경-설정)
4. [서버 및 프론트엔드 실행](#서버-및-프론트엔드-실행)
5. [빌드 및 테스트 자동화](#빌드-및-테스트-자동화)
6. [프론트엔드 구성 커스터마이징](#프론트엔드-구성-커스터마이징)
7. [성능 평가 및 벤치마크](#성능-평가-및-벤치마크)
8. [확장 가이드: 저장소 및 LLM 통합](#확장-가이드-저장소-및-llm-통합)
9. [시각화 앱 개발 가이드](#시각화-앱-개발-가이드)

## 기여 프로세스

LightRAG에 기여하기 위해서는 먼저 저장소를 포크하고, 로컬에서 변경 사항을 개발한 후 풀 리퀘스트를 생성해야 합니다. 이 프로젝트는 GitHub를 통해 기여를 관리하며, 모든 기여자는 프로젝트의 기여 가이드라인을 따라야 합니다. 기여는 코드 개선, 버그 수정, 문서 보완, 새로운 기능 추가 등 다양한 형태로 이루어질 수 있습니다. 기여를 시작하기 전에 `CONTRIBUTING.md` 파일을 확인하여 프로젝트의 기여 정책과 절차를 숙지하는 것이 중요합니다.

**Section sources**
- [README.md](file://README.md#L1822-L1844)

## 코드 스타일 및 테스트 전략

### 코드 스타일
- **Python**: 코드 스타일은 `black` 포맷터를 사용하여 일관성을 유지합니다. 모든 Python 코드는 `black`의 기본 설정에 따라 포맷팅되어야 하며, 이는 코드의 가독성과 유지보수성을 높이는 데 도움이 됩니다.
- **TypeScript**: 프론트엔드 코드는 `ESLint`를 사용하여 코드 품질을 관리합니다. `eslint.config.js` 파일에 정의된 규칙을 따르며, `prettier`와 함께 사용되어 코드 스타일을 통일합니다. 주요 설정으로는 들여쓰기 2칸, 작은따옴표 사용, `@typescript-eslint/no-explicit-any` 규칙 비활성화 등이 있습니다.

### 테스트 전략
- **백엔드 테스트**: Python 백엔드 코드는 `pytest` 또는 유사한 테스트 프레임워크를 사용하여 단위 테스트와 통합 테스트를 수행합니다. `lightrag/api` 디렉토리 내의 라우터와 유틸리티 함수는 철저한 테스트를 거쳐야 합니다.
- **프론트엔드 테스트**: 프론트엔드는 `React Testing Library`와 `Jest`를 사용하여 컴포넌트 테스트를 수행합니다. `lightrag_webui/src/components` 디렉토리의 모든 UI 컴포넌트는 렌더링, 상호작용, 상태 변경에 대한 테스트 케이스를 가져야 합니다.
- **E2E 테스트**: `examples` 디렉토리의 데모 스크립트는 전체 시스템의 엔드 투 엔드 테스트로 활용될 수 있습니다. 이들은 실제 사용 사례를 시뮬레이션하여 시스템의 전반적인 기능을 검증합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)
- [lightrag_webui/eslint.config.js](file://lightrag_webui/eslint.config.js)

## 로컬 개발 환경 설정

로컬 개발 환경을 설정하기 위해 다음 단계를 따르십시오.

1. **Python 패키지 설치**: LightRAG 패키지를 개발 모드로 설치하여 로컬 변경 사항이 즉시 반영되도록 합니다.
   ```bash
   pip install -e .
   ```
   이 명령은 `pyproject.toml`에 정의된 의존성을 설치하고, 패키지를 편집 가능한 모드로 설치합니다.

2. **프론트엔드 패키지 설치**: 프론트엔드 종속성을 설치합니다.
   ```bash
   cd lightrag_webui
   npm install
   ```
   이 명령은 `package.json`에 나열된 모든 npm 패키지를 설치합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)
- [lightrag_webui/package.json](file://lightrag_webui/package.json)

## 서버 및 프론트엔드 실행

### 서버 실행
백엔드 서버는 `lightrag_server.py` 스크립트를 통해 실행됩니다. 이 스크립트는 FastAPI 기반의 웹 서버를 시작하며, 다양한 명령줄 인수를 통해 구성할 수 있습니다.

```bash
python -m lightrag.api.lightrag_server --host 0.0.0.0 --port 9621 --llm-binding ollama --embedding-binding ollama
```

또는 `pyproject.toml`에 정의된 스크립트를 사용할 수 있습니다.
```bash
lightrag-server --host 0.0.0.0 --port 9621
```

서버는 `http://localhost:9621`에서 실행되며, `/docs` 엔드포인트를 통해 OpenAPI 문서를 확인할 수 있습니다.

### 프론트엔드 개발
프론트엔드는 Vite를 사용하여 개발 서버를 실행합니다. `lightrag_webui` 디렉토리에서 다음 명령을 실행합니다.

```bash
npm run dev
```

이 명령은 `vite.config.ts`에 정의된 설정에 따라 개발 서버를 시작합니다. 프록시 설정을 통해 백엔드 API 요청을 `http://localhost:9621`로 전달할 수 있습니다.

**Section sources**
- [lightrag/api/lightrag_server.py](file://lightrag/api/lightrag_server.py)
- [lightrag_webui/vite.config.ts](file://lightrag_webui/vite.config.ts)

## 빌드 및 테스트 자동화

`pyproject.toml` 파일은 개발 종속성과 자동화 스크립트를 정의합니다.

- **개발 종속성**: `[project.optional-dependencies]` 섹션의 `api` 그룹은 API 서버 개발에 필요한 모든 종속성을 포함합니다. 이에는 `fastapi`, `uvicorn`, `aiohttp` 등이 포함됩니다.
- **빌드 자동화**: `build-system` 섹션은 `setuptools`를 빌드 백엔드로 사용하도록 정의합니다. `pip install -e .` 명령은 이 설정을 기반으로 패키지를 설치합니다.
- **스크립트 자동화**: `[project.scripts]` 섹션은 `lightrag-server`와 `lightrag-gunicorn`이라는 두 개의 CLI 스크립트를 정의합니다. 이들은 `lightrag.api.lightrag_server:main` 및 `lightrag.api.run_with_gunicorn:main` 함수를 각각 실행합니다. 이를 통해 사용자는 간단한 명령으로 서버를 시작할 수 있습니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml)

## 프론트엔드 구성 커스터마이징

### Tailwind CSS 구성
`tailwind.config.js` 파일은 Tailwind CSS의 테마, 플러그인 및 콘텐츠 소스를 정의합니다.

- **콘텐츠 소스**: `./src/**/*.{ts,tsx}` 경로를 포함하여, 소스 코드 내에서 사용된 모든 Tailwind 클래스가 추출되도록 합니다.
- **테마 확장**: `theme.extend`를 통해 색상, 반경, 애니메이션 등을 커스터마이징할 수 있습니다. 예를 들어, `--border`, `--input`과 같은 CSS 변수를 사용하여 다크 모드를 지원합니다.
- **플러그인**: `tailwindcss-animate` 및 `@tailwindcss/typography` 플러그인이 로드되어 애니메이션과 풍부한 텍스트 스타일을 제공합니다.

### Vite 구성
`vite.config.ts` 파일은 Vite 빌드 도구의 동작을 제어합니다.

- **빌드 최적화**: `build.rollupOptions.manualChunks`를 통해 코드 분할(chunking) 전략을 정의합니다. React, 그래프 시각화 라이브러리, UI 컴포넌트 등을 별도의 청크로 분리하여 초기 로딩 속도를 향상시킵니다.
- **프록시 설정**: 개발 서버의 프록시를 구성하여 `/api`, `/docs` 등의 요청을 백엔드 서버로 전달합니다. 이는 프론트엔드와 백엔드를 분리된 포트에서 실행할 때 CORS 문제를 해결합니다.
- **별칭 설정**: `@` 별칭을 `./src` 디렉토리로 매핑하여 모듈 가져오기 경로를 단순화합니다.

**Section sources**
- [lightrag_webui/tailwind.config.js](file://lightrag_webui/tailwind.config.js)
- [lightrag_webui/vite.config.ts](file://lightrag_webui/vite.config.ts)

## 성능 평가 및 벤치마크

### `batch_eval.py` 스크립트 사용법
`reproduce/batch_eval.py` 스크립트는 두 가지 다른 RAG 시스템의 출력을 평가하기 위해 OpenAI의 배치 API를 사용합니다.

1. **입력 파일 준비**:
   - `query_file`: 평가할 질문이 포함된 텍스트 파일. 각 질문은 `- Question X: <질문>` 형식으로 시작해야 합니다.
   - `result1_file`, `result2_file`: 두 가지 다른 시스템의 JSON 형식 응답 파일.

2. **