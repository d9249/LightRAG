# 로컬 설치

<cite>
**이 문서에서 참조한 파일**  
- [pyproject.toml](file://pyproject.toml)
- [setup.py](file://setup.py)
- [.env](file://.env)
- [env.example](file://env.example)
- [lightrag/__init__.py](file://lightrag/__init__.py)
</cite>

## 목차
1. [소개](#소개)
2. [Python 가상 환경 생성](#python-가상-환경-생성)
3. [Python 버전 요구사항](#python-버전-요구사항)
4. [LightRAG 설치 방법](#lightrag-설치-방법)
5. [.env 파일 설정](#env-파일-설정)
6. [설치 검증 절차](#설치-검증-절차)
7. [흔한 문제 및 해결 방법](#흔한-문제-및-해결-방법)
8. [결론](#결론)

## 소개
LightRAG는 지식 그래프 기반의 검색 강화 생성(Retrieval-Augmented Generation, RAG) 시스템으로, 문서에서 엔티티와 관계를 추출하여 구조화된 지식을 생성하고 이를 기반으로 정확한 응답을 제공합니다. 본 문서는 Python 가상 환경에서 LightRAG를 로컬로 설치하는 절차를 단계별로 안내합니다. Python 3.12 이상의 버전을 사용해야 하며, `pyproject.toml` 또는 `setup.py`를 활용한 종속성 설치, `.env` 파일을 통한 환경 변수 설정, 설치 후 검증 및 흔한 문제 해결 방법까지 포함합니다.

## Python 가상 환경 생성
LightRAG 설치를 위한 첫 번째 단계는 Python 가상 환경을 생성하는 것입니다. 가상 환경을 사용하면 프로젝트별로 독립적인 패키지 의존성을 관리할 수 있어 충돌을 방지할 수 있습니다.

```bash
# 프로젝트 디렉터리로 이동
cd 

# Python 가상 환경 생성
python -m venv lightrag-env

# 가상 환경 활성화 (Windows)
lightrag-env\Scripts\activate

# 가상 환경 활성화 (macOS/Linux)
source lightrag-env/bin/activate
```

가상 환경이 성공적으로 활성화되면 터미널 프롬프트 앞에 `(lightrag-env)` 표시가 나타납니다.

**Section sources**
- [README.md](file://README.md#L100-L110)

## Python 버전 요구사항
LightRAG는 Python 3.10 이상을 요구하며, 공식 문서에서는 Python 3.12 이상 사용을 권장합니다. 최신 기능과 성능 최적화를 위해 최신 버전의 Python을 사용하는 것이 좋습니다.

```bash
# 현재 Python 버전 확인
python --version

# 출력 예시: Python 3.12.4
```

`pyproject.toml` 파일에서 `requires-python = ">=3.10"`으로 명시되어 있으므로, 3.10 이상의 버전이 필요합니다. 그러나 일부 최신 기능과 안정성을 위해 3.12 이상을 사용하는 것이 바람직합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml#L10)
- [README.md](file://README.md#L50-L60)

## LightRAG 설치 방법
LightRAG는 PyPI에서 설치하거나 소스 코드에서 직접 설치할 수 있습니다. 두 경우 모두 `pip install -e .[api]` 명령어를 사용하여 API 기능을 포함한 개발 모드로 설치할 수 있습니다.

### PyPI를 통한 설치
```bash
# API 기능 포함 설치
pip install "lightrag-hku[api]"
```

### 소스 코드를 통한 설치
```bash
# 저장소 복제
git clone https://github.com/HKUDS/LightRAG.git
cd LightRAG

# 가상 환경 활성화 후 설치
pip install -e ".[api]"
```

`setup.py` 파일은 하위 호환성을 위한 최소한의 설정만 포함하고 있으며, 주요 구성은 `pyproject.toml`에 정의되어 있습니다. `pip install -e .[api]` 명령어는 `pyproject.toml`의 `[project.optional-dependencies]` 섹션에 정의된 `api` 그룹의 모든 종속성을 설치합니다.

**Section sources**
- [pyproject.toml](file://pyproject.toml#L20-L40)
- [setup.py](file://setup.py#L1-L5)
- [README.md](file://README.md#L110-L120)

## .env 파일 설정
환경 변수는 `.env` 파일을 통해 설정할 수 있습니다. LightRAG 루트 디렉터리에 있는 `env.example` 파일을 복사하여 `.env` 파일로 생성한 후, 필요한 값을 설정합니다.

```bash
# env.example 파일을 .env로 복사
cp env.example .env
```

`.env` 파일은 LLM 설정, 저장소 연결 정보, 서버 구성 등을 포함합니다. 다음은 주요 설정 항목입니다:

```env
# LLM 설정
LLM_BINDING=openai
LLM_MODEL=gpt-4o
LLM_BINDING_API_KEY=your_openai_api_key_here

# Embedding 설정
EMBEDDING_BINDING=ollama
EMBEDDING_MODEL=bge-m3:latest
EMBEDDING_BINDING_HOST=http://localhost:11434

# 서버 설정
HOST=0.0.0.0
PORT=9621
```

`env.example` 파일은 모든 가능한 환경 변수와 설명을 포함하고 있으며, 주석 처리된 상태로 제공됩니다. 사용하려는 설정만 주석을 해제하고 값을 지정하면 됩니다.

**Section sources**
- [env.example](file://env.example#L0-L353)
- [README.md](file://README.md#L130-L140)

## 설치 검증 절차
설치 후 Python에서 `import lightrag` 명령어를 사용하여 모듈이 정상적으로 로드되는지 확인합니다.

```python
# Python 인터프리터 실행
python

# LightRAG 임포트 테스트
>>> from lightrag import LightRAG
>>> print(LightRAG.__module__)
lightrag.lightrag

# 버전 확인
>>> import lightrag
>>> print(lightrag.__version__)
1.4.7
```

또한, `lightrag-server` 명령어가 실행 가능한지 확인합니다.

```bash
# 서버 실행 테스트
lightrag-server --help
```

모든 명령어가 정상적으로 실행되면 설치가 성공한 것입니다.

**Section sources**
- [lightrag/__init__.py](file://lightrag/__init__.py#L3-L5)
- [README.md](file://README.md#L150-L160)

## 흔한 문제 및 해결 방법
### 의존성 충돌
`pip install` 중 의존성 충돌이 발생할 경우, 가상 환경을 새로 생성하고 다시 설치하는 것이 가장 효과적인 해결 방법입니다.

```bash
# 가상 환경 삭제
rm -rf lightrag-env

# 재생성 및 재설치
python -m venv lightrag-env
lightrag-env\Scripts\activate
pip install -e ".[api]"
```

### Python 버전 불일치
Python 3.9 이하 버전에서는 `pyproject.toml`의 `requires-python = ">=3.10"` 조건을 충족하지 못해 설치가 실패합니다. Python 3.12 이상을 설치하고 사용해야 합니다.

```bash
# Python 버전 업그레이드 후 재시도
python --version
pip install -e ".[api]"
```

### LLM API 키 누락
`.env` 파일에 `LLM_BINDING_API_KEY`를 설정하지 않으면 LLM 호출 시 오류가 발생합니다. 반드시 유효한 API 키를 입력해야 합니다.

```env
LLM_BINDING_API_KEY=sk-your-valid-api-key-here
```

### 초기화 누락
LightRAG 객체를 생성한 후 `await rag.initialize_storages()`와 `await initialize_pipeline_status()`를 호출하지 않으면 `AttributeError` 또는 `KeyError`가 발생합니다. 초기화는 반드시 수행되어야 합니다.

```python
from lightrag import LightRAG
from lightrag.kg.shared_storage import initialize_pipeline_status

rag = LightRAG(working_dir="./rag_storage")
await rag.initialize_storages()
await initialize_pipeline_status()
```

**Section sources**
- [README.md](file://README.md#L200-L220)
- [lightrag/tools/check_initialization.py](file://lightrag/tools/check_initialization.py#L0-L180)

## 결론
본 문서는 Python 가상 환경에서 LightRAG를 로컬로 설치하는 전 과정을 단계별로 안내하였습니다. Python 3.12 이상의 버전을 사용하고, `pyproject.toml` 기반의 `pip install -e .[api]` 명령어로 설치하며, `env.example` 파일을 기반으로 `.env` 환경 설정을 완료한 후, `import lightrag` 명령어로 설치를 검증하는 절차를 따르면 성공적으로 설치할 수 있습니다. 흔한 문제들은 주로 Python 버전, 의존성 충돌, 환경 변수 누락에서 발생하므로, 이러한 사항을 주의 깊게 확인하면 문제를 예방할 수 있습니다.