# LightRAG Knowledge Graph Visualizer

LightRAG 데이터를 독립적인 HTML 파일로 시각화하는 도구입니다. Python 파일 하나 실행으로 완전히 독립적인 HTML 그래프를 생성할 수 있습니다.

## 🚀 빠른 시작

### 💡 두 가지 버전 제공

1. **🎯 WebUI 동일 버전** (Sigma.js 기반) - **추천**
```bash
python generate_sigma_graph.py
```

2. **⚡ 고성능 버전** (Vis.js 기반)
```bash  
python generate_graph.py
```

### 📊 결과 확인
- `output/knowledge_graph_sigma.html` (WebUI 동일)
- `output/knowledge_graph.html` (고성능 버전)
- 브라우저에서 HTML 파일을 열어보세요

## 📁 프로젝트 구조

```
visual/
├── 🎯 generate_sigma_graph.py     # WebUI 동일 버전 (Sigma.js) ⭐ 추천
├── ⚡ generate_graph.py           # 고성능 버전 (Vis.js)  
├── 📊 demo_sigma.py              # WebUI 스타일 데모
├── 📊 demo.py                    # 고성능 버전 데모
├── 📂 output/                     # 생성된 HTML 파일들
│   ├── knowledge_graph_sigma.html # WebUI 동일 결과
│   └── knowledge_graph.html       # 고성능 버전 결과
├── 📂 demo_data_sigma/            # WebUI 스타일 데모 데이터
├── 📂 demo_data/                  # 고성능 버전 데모 데이터
└── 📄 README.md                   # 이 파일
```

## 🎯 두 버전 비교

| 특성 | 🎯 WebUI 동일 (Sigma.js) | ⚡ 고성능 (Vis.js) |
|------|------------------------|-----------------|
| **시각적 결과** | WebUI와 100% 동일 | 최적화된 스타일 |
| **렌더링 엔진** | WebGL (고품질) | Canvas/SVG |
| **성능** | 우수 | 매우 우수 (대용량 최적화) |
| **호환성** | 모던 브라우저 | 모든 브라우저 |
| **물리 엔진** | ForceAtlas2 (WebUI 동일) | Barnes-Hut |
| **추천 용도** | WebUI 결과 재현 | 성능 최우선 |

## 🎯 주요 기능

### 📊 그래프 시각화 (공통)
- **인터랙티브 그래프**: 드래그, 줌, 선택 가능
- **노드 분류**: 엔티티 타입별 색상 구분 (인물, 조직, 장소, 개념 등)
- **엣지 가중치**: 관계 강도에 따른 엣지 두께 조절
- **동적 레이아웃**: 물리 시뮬레이션 기반 자동 배치

### 🎮 컨트롤 기능
- **전체 보기**: 그래프 전체를 화면에 맞춤
- **물리 효과**: 노드 움직임 활성화/비활성화
- **줌 리셋**: 줌 레벨을 1.0으로 초기화
- **노드 표시**: 노드 숨김/보임 토글
- **랜덤 배치**: 노드를 랜덤하게 재배치
- **이미지 저장**: PNG 파일로 그래프 내보내기

### 🔍 검색 기능
- **실시간 검색**: 엔티티 이름으로 노드 검색
- **빠른 이동**: 검색 결과 클릭으로 해당 노드로 포커스
- **키보드 단축키**: Ctrl+F로 검색창 활성화

### 📈 정보 패널
- **그래프 통계**: 노드/엣지 개수, 평균 연결도, 허브 노드
- **엔티티 범례**: 타입별 색상과 개수 표시
- **설정 옵션**: 라벨 표시/숨김 등

## ⌨️ 키보드 단축키

| 키 | 기능 |
|---|---|
| `Ctrl+F` | 검색창 포커스 |
| `Esc` | 선택 해제 및 검색 결과 지우기 |
| `R` | 전체 보기 |
| `S` | 물리 효과 토글 |

## 🎨 엔티티 타입 및 색상

| 타입 | 색상 | 설명 |
|---|---|---|
| 👤 인물 | 🔴 빨강 | 사람, 고객, 환자 등 |
| 🏢 조직 | 🟢 청록 | 회사, 병원, 정부기관 등 |
| 📍 장소 | 🔵 파랑 | 지역, 주소, 건물 등 |
| ⚕️ 의료 | 🩷 핑크 | 질병, 치료, 의료용어 등 |
| ⚖️ 법률 | 🟦 파랑 | 법률, 계약, 약관 등 |
| 💰 금융 | 🟣 보라 | 보험, 대출, 투자 등 |
| 📦 제품 | 🟩 녹색 | 상품, 서비스, 특약 등 |
| 💻 기술 | 🩵 시안 | 시스템, 코드, 디지털 등 |
| 💡 개념 | 🟨 노랑 | 추상적 개념, 아이디어 등 |
| 📂 기타 | ⚫ 회색 | 분류되지 않은 엔티티 |

## 🔧 기술 스택

- **Backend**: Python 3.7+
- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **그래프 라이브러리**: Vis.js Network
- **데이터 형식**: JSON
- **의존성**: 없음 (완전히 독립적)

## 📝 데이터 구조

### 입력 데이터
LightRAG에서 생성된 다음 파일들을 읽습니다:
- `../data/rag_storage/kv_store_full_entities.json`: 엔티티 데이터
- `../data/rag_storage/kv_store_full_relations.json`: 관계 데이터

### 노드 구조
```json
{
  "id": "엔티티명",
  "label": "표시할 라벨",
  "color": "#FF6B6B",
  "size": 25,
  "title": "툴팁 텍스트",
  "connections": 5
}
```

### 엣지 구조
```json
{
  "from": "소스 엔티티",
  "to": "타겟 엔티티", 
  "width": 3,
  "color": {"color": "rgba(158, 185, 212, 0.4)"},
  "title": "관계 정보"
}
```

## 🛠️ 커스터마이징

### 색상 변경
`generate_graph.py`의 `_classify_entity()` 메서드를 수정하여 엔티티 분류 로직을 변경할 수 있습니다.

### 레이아웃 조정
HTML 템플릿의 `options` 객체에서 물리 시뮬레이션 매개변수를 조정할 수 있습니다.

### UI 테마 변경
CSS 스타일을 수정하여 전체적인 테마를 변경할 수 있습니다.

## 🐛 문제 해결

### Q: HTML 파일이 생성되지 않아요
**A**: LightRAG 데이터 파일이 올바른 위치에 있는지 확인하세요:
- `../data/rag_storage/kv_store_full_entities.json`
- `../data/rag_storage/kv_store_full_relations.json`

### Q: 그래프가 비어있어요
**A**: LightRAG에 문서가 인덱싱되어 있는지 확인하세요. 데이터가 없으면 빈 그래프가 생성됩니다.

### Q: 브라우저에서 파일이 열리지 않아요
**A**: 파일:// 프로토콜을 지원하는 브라우저를 사용하거나, 로컬 웹서버를 통해 접근하세요.

### Q: 노드가 너무 작거나 커요
**A**: `build_graph_data()` 메서드의 노드 크기 계산 로직을 조정하세요.

## 📄 라이센스

이 프로젝트는 MIT 라이센스 하에 배포됩니다.

## 🤝 기여하기

버그 리포트나 기능 요청은 이슈로 등록해주세요.

---

📚 **LightRAG Knowledge Graph Visualizer** - 데이터를 아름다운 지식 그래프로 변환하세요! ✨
