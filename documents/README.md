# LightRAG Documents API

LightRAG ê¸°ë°˜ì˜ ë…ë¦½ì ì¸ 3-tier ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì²˜ë¦¬ ë° ì¿¼ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### 3-Tier êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Tier                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Document API   â”‚ â”‚   Query API     â”‚ â”‚   Graph API     â”‚â”‚
â”‚  â”‚   Routes        â”‚ â”‚    Routes       â”‚ â”‚    Routes       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Business Logic Tier                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Document       â”‚ â”‚   Query         â”‚ â”‚   Graph         â”‚â”‚
â”‚  â”‚  Service        â”‚ â”‚   Service       â”‚ â”‚   Service       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚  LightRAG       â”‚                        â”‚
â”‚                  â”‚  Wrapper        â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Data Tier                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  File System    â”‚ â”‚  NanoVectorDB   â”‚ â”‚     Neo4j       â”‚â”‚
â”‚  â”‚  (Documents)    â”‚ â”‚  (Embeddings)   â”‚ â”‚   (Graph)       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚     Ollama      â”‚                        â”‚
â”‚                  â”‚     (LLM)       â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. Docker Composeë¡œ ì‹¤í–‰

```bash
# ì €ì¥ì†Œ í´ë¡  ë° ì´ë™
git clone <repository-url>
cd LightRAG/documents

# ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### 2. ìˆ˜ë™ ì„¤ì¹˜

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
python -m uvicorn app.main:app --host 0.0.0.0 --port 9621
```

## ğŸ“‹ í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- Python 3.11+
- Docker & Docker Compose
- ìµœì†Œ 8GB RAM
- 10GB ì—¬ìœ  ë””ìŠ¤í¬ ê³µê°„

### ì™¸ë¶€ ì„œë¹„ìŠ¤
- **Neo4j**: ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤
- **Ollama**: LLM ë° ì„ë² ë”© ì„œë¹„ìŠ¤

## ğŸ”§ êµ¬ì„±

### í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ëª… | ì„¤ëª… | ê¸°ë³¸ê°’ |
|--------|------|--------|
| `PORT` | API ì„œë²„ í¬íŠ¸ | 9621 |
| `OLLAMA_URL` | Ollama ì„œë¹„ìŠ¤ URL | http://ollama:11434 |
| `NEO4J_URL` | Neo4j ì„œë¹„ìŠ¤ URL | bolt://neo4j:7687 |
| `NEO4J_USER` | Neo4j ì‚¬ìš©ìëª… | neo4j |
| `NEO4J_PASSWORD` | Neo4j ë¹„ë°€ë²ˆí˜¸ | password |
| `LLM_MODEL` | ì‚¬ìš©í•  LLM ëª¨ë¸ | llama3.1 |
| `EMBEDDING_MODEL` | ì„ë² ë”© ëª¨ë¸ | nomic-embed-text |

### ì§€ì› íŒŒì¼ í˜•ì‹
- PDF (.pdf)
- Microsoft Word (.docx)
- PowerPoint (.pptx)
- Excel (.xlsx)
- í…ìŠ¤íŠ¸ (.txt)
- ë§ˆí¬ë‹¤ìš´ (.md)
- JSON (.json)
- XML (.xml)
- CSV (.csv)

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ë¬¸ì„œ ê´€ë¦¬ (`/documents`)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|------------|------|
| POST | `/documents/upload` | íŒŒì¼ ì—…ë¡œë“œ |
| POST | `/documents/text` | í…ìŠ¤íŠ¸ ì§ì ‘ ì‚½ì… |
| POST | `/documents/texts` | ë°°ì¹˜ í…ìŠ¤íŠ¸ ì‚½ì… |
| POST | `/documents/scan` | ë””ë ‰í„°ë¦¬ ìŠ¤ìº” |
| GET | `/documents` | ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ |
| GET | `/documents/status_counts` | ìƒíƒœë³„ í†µê³„ |
| DELETE | `/documents/delete_document` | ë¬¸ì„œ ì‚­ì œ |
| DELETE | `/documents/clear` | ì „ì²´ ì‚­ì œ |

### ì¿¼ë¦¬ (`/query`)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|------------|------|
| POST | `/query` | ê¸°ë³¸ RAG ì¿¼ë¦¬ |
| POST | `/query/stream` | ìŠ¤íŠ¸ë¦¬ë° ì¿¼ë¦¬ |
| POST | `/query/data` | êµ¬ì¡°í™”ëœ ë°ì´í„° ê²€ìƒ‰ |
| POST | `/query/local` | ë¡œì»¬ ëª¨ë“œ ì¿¼ë¦¬ |
| POST | `/query/global` | ê¸€ë¡œë²Œ ëª¨ë“œ ì¿¼ë¦¬ |
| GET | `/query/stats` | ì¿¼ë¦¬ í†µê³„ |

### ê·¸ë˜í”„ (`/graph`)

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|------------|------|
| GET | `/graph/label/list` | ëª¨ë“  ë ˆì´ë¸” |
| GET | `/graph/label/popular` | ì¸ê¸° ë ˆì´ë¸” |
| POST | `/graph/label/search` | ë ˆì´ë¸” ê²€ìƒ‰ |
| POST | `/graph` | ê·¸ë˜í”„ ì¡°íšŒ |
| POST | `/graph/entity/edit` | ì—”í‹°í‹° í¸ì§‘ |
| POST | `/graph/relation/edit` | ê´€ê³„ í¸ì§‘ |

## ğŸ’¡ ì‚¬ìš© ì˜ˆì œ

### 1. ë¬¸ì„œ ì—…ë¡œë“œ

```bash
curl -X POST "http://localhost:9621/documents/upload" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@document.pdf"
```

### 2. í…ìŠ¤íŠ¸ ì‚½ì…

```bash
curl -X POST "http://localhost:9621/documents/text" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ ë¬¸ì„œì…ë‹ˆë‹¤.",
    "source_id": "test_doc_1",
    "metadata": {"author": "user1"}
  }'
```

### 3. ì¿¼ë¦¬ ì‹¤í–‰

```bash
curl -X POST "http://localhost:9621/query" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "ë¬¸ì„œì˜ ì£¼ìš” ë‚´ìš©ì´ ë¬´ì—‡ì¸ê°€ìš”?",
    "mode": "mix"
  }'
```

### 4. ê·¸ë˜í”„ ë°ì´í„° ì¡°íšŒ

```bash
curl -X POST "http://localhost:9621/graph" \
  -H "Content-Type: application/json" \
  -d '{
    "entity_names": ["ì—”í‹°í‹°1", "ì—”í‹°í‹°2"],
    "depth": 2,
    "max_nodes": 100
  }'
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### API í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ê¸°ë³¸ í…ŒìŠ¤íŠ¸
python test_api.py

# íŠ¹ì • URL í…ŒìŠ¤íŠ¸
python test_api.py --url http://localhost:9621
```

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸

```bash
# í—¬ìŠ¤ ì²´í¬
curl http://localhost:9621/health

# API ë¬¸ì„œ í™•ì¸
open http://localhost:9621/docs
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### ë¡œê·¸ í™•ì¸

```bash
# Docker Compose ë¡œê·¸
docker-compose logs -f lightrag-api

# ê°œë³„ ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f neo4j
docker-compose logs -f ollama
```

### ìƒíƒœ í™•ì¸

```bash
# ì „ì²´ ì‹œìŠ¤í…œ ìƒíƒœ
curl http://localhost:9621/health

# ë¬¸ì„œ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ìƒíƒœ
curl http://localhost:9621/documents/pipeline_status

# ê·¸ë˜í”„ í†µê³„
curl http://localhost:9621/graph/stats
```

## ğŸ” ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **Ollama ì—°ê²° ì‹¤íŒ¨**
   ```bash
   # Ollama ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
   docker-compose logs ollama
   
   # ëª¨ë¸ ë‹¤ìš´ë¡œë“œ í™•ì¸
   docker-compose exec ollama ollama list
   ```

2. **Neo4j ì—°ê²° ì‹¤íŒ¨**
   ```bash
   # Neo4j ë¡œê·¸ í™•ì¸
   docker-compose logs neo4j
   
   # ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸: http://localhost:7474
   ```

3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
   ```bash
   # Docker ë©”ëª¨ë¦¬ ì„¤ì • í™•ì¸
   docker stats
   
   # ë¶ˆí•„ìš”í•œ ì»¨í…Œì´ë„ˆ ì •ë¦¬
   docker system prune
   ```

### ë””ë²„ê·¸ ëª¨ë“œ

```bash
# ë””ë²„ê·¸ ëª¨ë“œë¡œ ì‹¤í–‰
DEBUG=True docker-compose up

# ìì„¸í•œ ë¡œê·¸ ì¶œë ¥
LOG_LEVEL=DEBUG docker-compose up
```

## ğŸ› ï¸ ê°œë°œ

### ê°œë°œ í™˜ê²½ ì„¤ì •

```bash
# ê°œë°œ ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
pip install -r requirements-dev.txt

# Pre-commit í›… ì„¤ì¹˜
pre-commit install

# ì½”ë“œ í¬ë§·íŒ…
black app/ core/
isort app/ core/

# íƒ€ì… ì²´í¬
mypy app/ core/
```

### ì½”ë“œ êµ¬ì¡°

```
documents/
â”œâ”€â”€ app/                    # Presentation Tier
â”‚   â”œâ”€â”€ main.py            # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ config.py          # ì„¤ì •
â”‚   â”œâ”€â”€ models/            # Pydantic ëª¨ë¸
â”‚   â””â”€â”€ routers/           # API ë¼ìš°í„°
â”œâ”€â”€ core/                  # Business Logic Tier
â”‚   â”œâ”€â”€ lightrag_wrapper.py # LightRAG ë˜í¼
â”‚   â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ utils/             # ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ data/                  # Data Tier
â”‚   â”œâ”€â”€ inputs/            # ì—…ë¡œë“œ íŒŒì¼
â”‚   â”œâ”€â”€ rag_storage/       # LightRAG ë°ì´í„°
â”‚   â””â”€â”€ graph_storage/     # Neo4j ë°ì´í„°
â”œâ”€â”€ docker-compose.yml     # ì„œë¹„ìŠ¤ ì •ì˜
â”œâ”€â”€ Dockerfile            # ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¯¸ì§€
â””â”€â”€ requirements.txt      # Python ì˜ì¡´ì„±
```

## ğŸ“š ì¶”ê°€ ìë£Œ

- [LightRAG ê³µì‹ ë¬¸ì„œ](https://github.com/HKUDS/LightRAG)
- [FastAPI ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [Neo4j ë¬¸ì„œ](https://neo4j.com/docs/)
- [Ollama ë¬¸ì„œ](https://ollama.ai/docs/)

## ğŸ¤ ê¸°ì—¬

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ†˜ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´:

1. [Issues](../../issues)ì—ì„œ ê¸°ì¡´ ë¬¸ì œë¥¼ ê²€ìƒ‰
2. ìƒˆë¡œìš´ ì´ìŠˆ ìƒì„±
3. ìƒì„¸í•œ ì˜¤ë¥˜ ë¡œê·¸ì™€ ì¬í˜„ ë‹¨ê³„ í¬í•¨

---

**Made with â¤ï¸ using LightRAG and FastAPI**